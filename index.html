<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Smart Choice SOP Flowchart</title>
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
      font-size: 14px;
      color: #1f1f1f;
    }

    body {
      box-sizing: border-box;
    }

    #app {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
    }

    .sp-container {
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: column;
      background-color: #f8f9fa;
    }

    .sp-header {
      padding: 16px 20px;
      border-bottom: 1px solid #e0e0e0;
      background-color: #ffffff;
      flex-shrink: 0;
    }

    .sp-title {
      font-size: 20px;
      font-weight: 600;
      color: #1f1f1f;
      margin: 0;
      padding: 0;
    }

    .sp-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      width: 100%;
    }

    .sp-content::-webkit-scrollbar {
      width: 8px;
    }

    .sp-content::-webkit-scrollbar-track {
      background-color: #f8f9fa;
    }

    .sp-content::-webkit-scrollbar-thumb {
      background-color: #d0d0d0;
      border-radius: 4px;
    }

    .sp-content::-webkit-scrollbar-thumb:hover {
      background-color: #b0b0b0;
    }

    .card-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 12px;
  margin-bottom: 20px;
}

    .sop-card {
      background-color: #ffffff;
      border: 1px solid #d0d0d0;
      border-radius: 4px;
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      position: relative;
      min-height: 140px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
    }

    .sop-card:hover {
      border-color: #0078d4;
      box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .sop-card-number {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background-color: #0078d4;
      color: #ffffff;
      font-size: 12px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
    }

    .sop-card-icon {
      font-size: 28px;
      margin-bottom: 8px;
      line-height: 1;
    }

    .sop-card-title {
      font-size: 13px;
      font-weight: 600;
      color: #1f1f1f;
      margin: 0;
      padding: 0;
      line-height: 1.4;
      word-break: break-word;
    }

    .sop-card-hint {
      font-size: 11px;
      color: #737373;
      margin-top: 6px;
      padding: 0;
    }

    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      z-index: 10000;
      justify-content: center;
      align-items: center;
      padding: 16px;
      overflow-y: auto;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background-color: #ffffff;
      border-radius: 4px;
      max-width: 500px;
      width: 100%;
      max-height: 85vh;
      overflow-y: auto;
      padding: 24px;
      position: relative;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
      animation: slideUp 0.2s ease-out;
      margin: auto;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(16px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .modal-close {
      position: absolute;
      top: 12px;
      right: 12px;
      background-color: transparent;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #737373;
      padding: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 2px;
      transition: background-color 0.1s;
      line-height: 1;
    }

    .modal-close:hover {
      background-color: #f0f0f0;
      color: #1f1f1f;
    }

    .modal-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-right: 28px;
    }

    .modal-icon {
      font-size: 32px;
      line-height: 1;
      flex-shrink: 0;
    }

    .modal-title {
      font-size: 20px;
      font-weight: 600;
      color: #1f1f1f;
      margin: 0;
      padding: 0;
    }

    .modal-badge {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 2px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 16px;
      background-color: #e7f1ff;
      color: #0078d4;
      margin-top: 0;
    }

    .modal-body {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .modal-section {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .modal-section-title {
      font-size: 13px;
      font-weight: 600;
      color: #1f1f1f;
      margin: 0;
      padding: 0;
      display: none;
    }

    .modal-section-title:not(:empty) {
      display: block;
    }

    .modal-section-content {
      font-size: 13px;
      color: #3f3f3f;
      line-height: 1.5;
      margin: 0;
      padding: 0;
    }

    .quick-ref {
      background-color: #f8f9fa;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      padding: 16px;
      margin-top: 20px;
      width: 100%;
    }

    .quick-ref-title {
      font-size: 14px;
      font-weight: 600;
      color: #1f1f1f;
      margin: 0 0 12px 0;
      padding: 0;
    }

    .quick-ref-item {
      font-size: 12px;
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 0;
    }

    .quick-ref-item:last-child {
      margin-bottom: 0;
    }

    .quick-ref-label {
      font-weight: 600;
      color: #737373;
      text-transform: uppercase;
      font-size: 11px;
      margin: 0;
      padding: 0;
    }

    .quick-ref-value {
      color: #1f1f1f;
      font-family: Consolas, 'Courier New', monospace;
      font-size: 12px;
      margin: 0;
      padding: 0;
      word-break: break-word;
    }

    @media (max-width: 600px) {
      .sp-header {
        padding: 12px 16px;
      }

      .sp-title {
        font-size: 16px;
      }

      .sp-content {
        padding: 12px;
      }

      .card-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 8px;
      }

      .sop-card {
        min-height: 120px;
        padding: 12px;
      }

      .sop-card-icon {
        font-size: 24px;
        margin-bottom: 6px;
      }

      .sop-card-title {
        font-size: 12px;
      }

      .modal-content {
        padding: 16px;
        max-height: 90vh;
      }

      .modal-header {
        padding-right: 24px;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full">
   <div class="sp-container"><!-- Header -->
    <div class="sp-header">
     <h2 class="sp-title" id="main-title">Smart Choice New Business Flow</h2>
    </div><!-- Modal -->
    <div id="modal-overlay" class="modal-overlay" onclick="closeModal(event)">
     <div class="modal-content" onclick="event.stopPropagation()"><button class="modal-close" onclick="closeModal()">Ã—</button>
      <div id="modal-header" class="modal-header"><span class="modal-icon" id="modal-icon"></span>
       <h3 class="modal-title" id="modal-title"></h3>
      </div>
      <div id="modal-badge" class="modal-badge"></div>
      <div id="modal-body" class="modal-body"></div>
     </div>
    </div><!-- Content -->
    <div class="sp-content sp-scrollbar">
     <div class="card-grid" id="card-grid"></div><!-- Quick Reference -->
     <div class="quick-ref">
      <h3 class="quick-ref-title">Quick Reference</h3>
      <div class="quick-ref-item"><span class="quick-ref-label">Email</span> <span class="quick-ref-value">CLSmart@nationwide.com</span>
      </div>
      <div class="quick-ref-item"><span class="quick-ref-label">New Business Code</span> <span class="quick-ref-value">61650</span>
      </div>
      <div class="quick-ref-item"><span class="quick-ref-label">Renewal Code</span> <span class="quick-ref-value">57850</span>
      </div>
      <div class="quick-ref-item"><span class="quick-ref-label">Producer</span> <span class="quick-ref-value">Ashley Wingate</span>
      </div>
      <div class="quick-ref-item"><span class="quick-ref-label">Amendments</span> <span class="quick-ref-value">CLAmendment@nationwide.com</span>
      </div>
      <div class="quick-ref-item"><span class="quick-ref-label">Post-Bind Issues</span> <span class="quick-ref-value">CLInside@nationwide.com</span>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      main_title: 'Smart Choice New Business Flow',
      step_1_title: 'Obtain New Lead',
      step_2_title: 'Review Eligibility',
      step_3_title: 'Gather Information',
      step_4_title: 'Quote the Risk',
      step_5_title: 'Present Quote',
      step_6_title: 'Bind Request',
      step_7_title: 'Bind Coverage',
      step_8_title: 'Pre-Renewal Direction'
    };

    let config = { ...defaultConfig };

    const stepData = {
      1: {
        title: 'Obtain New Lead',
        icon: 'ðŸ“§',
        badge: 'START',
        items: [
          { title: '', content: 'Obtain new lead via email - Identify if agent requests direct contact' },
          { title: '', content: 'If agent requests customer contact, proceed to Smart Choice Customer Contact section' },
          { title: '', content: 'Email for Smart Choice should come into the CLSmart@nationwide.com address only' }
        ]
      },
      2: {
        title: 'Review Eligibility',
        icon: 'âœ“',
        badge: 'REVIEW',
        items: [
          { title: '', content: 'Review submission to determine eligibility' },
          { title: '', content: 'Give benefit of doubt if unsure if eligible, always lean to gather information or call agent unless certain the risk is ineligible.' }
        ]
      },
      3: {
        title: 'Gather Information',
        icon: 'ðŸ“ž',
        badge: 'GATHER',
        items: [
          { title: '', content: 'Gather information and prepare quote' },
          { title: '', content: 'Make outbound calls to agents as primary mode of contact to obtain basic information needed to quote the risk.' },
          { title: '', content: 'Questions emails may be sent if we receive no answer to these calls.' },
          { title: '', content: 'Full underwriting questions can be sent via email along with an Indication, suggested not to try to ask all on phone unless agent requests to do so.' }
        ]
      },
      4: {
        title: 'Quote the Risk',
        icon: 'ðŸ’°',
        badge: 'QUOTE',
        items: [
          { title: 'Agency Codes', content: 'Use the correct agency codes & producer for the partnership. Smart Choice New Business: Code 61650 & Producer: Ashley Wingate' },
          { title: 'Workers Compensation', content: 'Owner Inclusion/Exclusion rules must be reviewed and documented at quote to ensure compliance including required forms are obtained prior to or shortly after bind.' }
        ]
      },
      5: {
        title: 'Present Quote',
        icon: 'ðŸ“¬',
        badge: 'PRESENT',
        items: [
          { title: '', content: 'Quotes should be presented to the customer by the agent if we are working with the agent directly.' },
          { title: '', content: 'Send the Approved Quote email template with proposal attached' },
          { title: '', content: 'Include notation of any pre-bind or trailing documents such as WC forms' },
          { title: '', content: 'Read all required statements prior to presenting a rate by phone:' },
          { title: 'Conditional Quote', content: '"All quotes are calculated based upon our current rates, and the information that you provide during the application process, supplemented by publicly available data. Any information provided or discovered at a later date could affect your rate and/or eligibility."' }
        ]
      },
      6: {
        title: 'Bind Request',
        icon: 'ðŸ”—',
        badge: 'REQUEST',
        items: [
          { title: '', content: 'Agents should reply to our Approved Quote email answering all of our bind questions.' },
          { title: '', content: 'Agents may also call in and provide the answers to our bind questions if desired. Interaction should be clearly documented.' },
          { title: '', content: 'If agent requests to provide payment information for customer and did not email in a bind request, ask if they reviewed payment instructions in email.' },
          { title: '', content: 'Proceed to bind coverage once all bind questions have been answered.' }
        ]
      },
      7: {
        title: 'Bind Coverage',
        icon: 'âœ…',
        badge: 'BIND',
        items: [
          { title: '', content: 'Make any final updates or corrections to the policy including:' },
          { title: '', content: 'Updating Effective and Expiration Dates' },
          { title: '', content: 'Updating Mailing/Billing Address' },
          { title: '', content: 'Proceed to Issue the policy based on the payment options selected by the agent' },
          { title: '', content: 'If taking payment information from the agent, ask them to read you the EFT account numbers to enter in the system, or to type the Credit Card number into the phone with Semafone.' },
          { title: '', content: 'Payment information must be entered into the system as you bind. Do not write down or save any payment information.' },
          { title: '', content: 'If REFT is established, the REFT form must be sent to the customer via Docusign immediately post bind. This form can be found on the post-bind screen in Policy Center.' },
          { title: '', content: 'Send to CLAmendment@nationwide.com when signature is obtained.' },
          { title: '', content: 'Once issued, download Application and Dec pages to be attached' },
          { title: '', content: 'Send a reply email to the agent with the Bind template completed' },
          { title: '', content: 'Send a separate Bind email template to the Customer if elected by agent (ensure it is sent FROM CLSmart@nationwide.com for this partnership)' }
        ]
      },
      8: {
        title: 'Pre-Renewal Direction',
        icon: 'ðŸŽ¯',
        badge: 'COMPLETE',
        items: [
          { title: '', content: 'A PRD must be set for each new account bound from the Account Summary Screen in Policy Center' },
          { title: '', content: 'Choose Actions, then Pre-Renewal Direction, and fill in as follows:' },
          { title: '', content: 'Direction: "Refer to Customer Service Representative"' },
          { title: '', content: 'Subject: "Refer to CSR"' },
          { title: '', content: 'Text (Copy/Paste): At renewal update agency code to 57850 please keep producer the same. This is part of transfer between agency codes that has been vetted by NSS with proper documentation. Please allow 57850 to service the policy prior to the agency code update at the upcoming renewal. POST BIND CONTACT: Contact CLInside@nationwide.com regarding any post-bind 1st term underwriting concerns prior to contacting primary listed agent due to this being sell-on-behalf business from the NSS CL Inside Sales team.' }
        ]
      }
    };

    function renderCards() {
      const grid = document.getElementById('card-grid');
      grid.innerHTML = '';

      for (let i = 1; i <= 8; i++) {
        const stepTitle = config[`step_${i}_title`] || defaultConfig[`step_${i}_title`];
        const stepData_ = stepData[i];
        
        const card = document.createElement('div');
        card.className = 'sop-card';
        card.onclick = () => openModal(i);
        card.innerHTML = `
          <div class="sop-card-number">${i}</div>
          <div class="sop-card-icon">${stepData_.icon}</div>
          <h3 class="sop-card-title">${stepTitle}</h3>
          <div class="sop-card-hint">Click for details</div>
        `;
        grid.appendChild(card);
      }
    }

    function openModal(stepNum) {
      const data = stepData[stepNum];
      const stepTitle = config[`step_${stepNum}_title`] || defaultConfig[`step_${stepNum}_title`];
      
      document.getElementById('modal-icon').textContent = data.icon;
      document.getElementById('modal-title').textContent = stepTitle;
      document.getElementById('modal-badge').textContent = data.badge;

      const body = document.getElementById('modal-body');
      body.innerHTML = '';

      data.items.forEach(item => {
        const section = document.createElement('div');
        section.className = 'modal-section';
        section.innerHTML = `
          <h4 class="modal-section-title">${item.title}</h4>
          <p class="modal-section-content">${item.content}</p>
        `;
        body.appendChild(section);
      });

      document.getElementById('modal-overlay').classList.add('active');
    }

    function closeModal(event) {
      if (event && event.target.id !== 'modal-overlay') return;
      document.getElementById('modal-overlay').classList.remove('active');
    }

    async function onConfigChange(newConfig) {
      config = { ...defaultConfig, ...newConfig };
      
      const titleEl = document.getElementById('main-title');
      if (titleEl) {
        titleEl.textContent = config.main_title || defaultConfig.main_title;
      }

      renderCards();
    }

    function mapToCapabilities() {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }

    function mapToEditPanelValues(config) {
      const map = new Map([
        ['main_title', config.main_title || defaultConfig.main_title]
      ]);

      for (let i = 1; i <= 8; i++) {
        map.set(`step_${i}_title`, config[`step_${i}_title`] || defaultConfig[`step_${i}_title`]);
      }

      return map;
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeModal();
      }
    });

    // Initial render
    renderCards();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9c9382f6060327dc',t:'MTc3MDMwNjA4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
